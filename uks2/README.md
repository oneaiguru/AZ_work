# –£–ö–° –ò—Ä–∫—É—Ç—Å–∫ ‚Äî Next.js + Directus + Nginx

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å—Ç–µ–∫ –¥–ª—è —Å–∞–π—Ç–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–ø–∏—Ç–∞–ª—å–Ω–æ–≥–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –≥. –ò—Ä–∫—É—Ç—Å–∫–∞. –í–∞—Ä–∏–∞–Ω—Ç `uks2/` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Next.js 14, Headless CMS Directus 11 –∏ Nginx –≤ —Ä–æ–ª–∏ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose –≤–º–µ—Å—Ç–µ —Å PostgreSQL, Redis –∏ MinIO.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
uks2/
‚îú‚îÄ‚îÄ frontend/        # Next.js 14 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (App Router, TypeScript)
‚îú‚îÄ‚îÄ directus/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Directus (snapshot, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, Dockerfile)
‚îú‚îÄ‚îÄ ops/nginx/       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è reverse-proxy Nginx
‚îú‚îÄ‚îÄ scripts/         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 22+ –∏ npm 10+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ CLI Directus; —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ Node 20, –Ω–æ Directus 11 —Ç—Ä–µ–±—É–µ—Ç Node 22)
- Docker Engine 24+ –∏ Docker Compose Plugin 2.24+
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ `/etc/hosts` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `127.0.0.1 uks2.localhost`), —á—Ç–æ–±—ã –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π Nginx.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏:
   ```bash
   node scripts/generate-env.js
   ```
   –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç `uks2/.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –¥–æ–±–∞–≤—å—Ç–µ `--force`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, ‚Äî
   –ø—Ä–∏ —ç—Ç–æ–º —Ç–µ–∫—É—â–∏–π `DATABASE_PASSWORD` –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑–µ. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
   –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å, –¥–æ–±–∞–≤—å—Ç–µ `--rotate-db-password`: —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å `ALTER USER` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL —á–µ—Ä–µ–∑
   `docker compose exec`. –ï—Å–ª–∏ Docker –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é:
   ```bash
   docker compose exec postgres psql -U "$DATABASE_USERNAME" -d "$DATABASE_NAME" -c "ALTER USER \"$DATABASE_USERNAME\" WITH PASSWORD '$DATABASE_PASSWORD';"
   ```
   > ‚ö†Ô∏è –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `sudo` –∏ –≤—ã –≤–∏–¥–∏—Ç–µ `Error: ENOENT: no such file or directory, uv_cwd`, –∑–Ω–∞—á–∏—Ç root-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç–µ–∫—É—â–µ–º—É –∫–∞—Ç–∞–ª–æ–≥—É. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–µ–∑ `sudo`) –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `sudo bash -c 'cd /opt/AZ_work/uks2 && node scripts/generate-env.js --force'`, –ø–æ–¥—Å—Ç–∞–≤–∏–≤ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å –¥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ `uks2`.
2. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å—Ç–µ–∫ –ø–æ —á–∏—Ç–∞–µ–º–æ–º—É –¥–æ–º–µ–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `uks2.localhost`), –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É `127.0.0.1 uks2.localhost` –≤ `/etc/hosts`. –¢–∞–∫ Nginx –±—É–¥–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `http://uks2.localhost`, `http://uks2.localhost/admin` –∏ `http://uks2.localhost/db`.
3. –û–±–Ω–æ–≤–∏—Ç–µ URL –∏ cookie-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `.env`: `NEXT_PUBLIC_SITE_URL`, `NEXT_PUBLIC_CMS_URL`, `NEXT_PUBLIC_ASSETS_URL`, `DIRECTUS_PUBLIC_URL`, `DIRECTUS_COOKIE_DOMAIN`, `DIRECTUS_REFRESH_COOKIE_PATH` –∏ `PGADMIN_BASE_PATH`. –í –ø—Ä–æ–¥–∞–∫—à–Ω-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `https://uks.delightsoft.ru`, –ø–æ—ç—Ç–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—è —É–∂–µ –≤–∫–ª—é—á–∞—é—Ç –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏ `/admin` –∏ `/db`. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∑–∞–º–µ–Ω–∏—Ç–µ –∏—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ `http://uks2.localhost`, `http://uks2.localhost/admin`, `http://uks2.localhost/admin/assets`, `DIRECTUS_COOKIE_DOMAIN=` (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞) –∏ `PGADMIN_BASE_PATH=/db`. –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –ø–æ HTTP, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `DIRECTUS_REFRESH_COOKIE_SECURE=false`, —á—Ç–æ–±—ã Directus –≤—ã–¥–∞–≤–∞–ª cookie –±–µ–∑ —Ñ–ª–∞–≥–∞ `Secure`.
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TLS –¥–ª—è Nginx. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ `ops/nginx/certs` (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `NGINX_SSL_DOMAIN` –∏ `NGINX_SSL_DAYS`). –î–ª—è –±–æ–µ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ –∑–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º `fullchain.pem`/`privkey.pem` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ Certbot) –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–∫—Å–∏: `docker compose up -d nginx`.
5. pgAdmin —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTPS: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `pgadmin` —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ `ops/pgadmin/certs` (—Å–º. –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `PGADMIN_ENABLE_TLS`, `PGADMIN_SSL_DOMAIN`, `PGADMIN_SSL_DAYS`). –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω–∞—è –ø–∞—Ä–∞ `server.crt`/`server.key`, –ø–æ–ª–æ–∂–∏—Ç–µ –µ—ë –≤ —ç—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.
6. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —á—Ç–æ–±—ã —Å–∏–¥–µ—Ä –∏ CI –º–æ–≥–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –±–µ–∑ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è:
   1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Directus –∏ –≤–æ–π–¥–∏—Ç–µ –ø–æ–¥ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–æ–º (`DIRECTUS_ADMIN_EMAIL` / `DIRECTUS_ADMIN_PASSWORD`).
   2. –û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é –∞–≤–∞—Ç–∞—Ä–∞ ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è** ‚Üí –≤–∫–ª–∞–¥–∫–∞ **–¢–æ–∫–µ–Ω—ã** ‚Üí **–°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω**.
   3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ `.env` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `DIRECTUS_ACCESS_TOKEN`.
   4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `docker compose up -d`, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ—á–∏—Ç–∞–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
   –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ö—Ä–∞–Ω–µ–Ω–∏—é —Ç–æ–∫–µ–Ω–∞ —Å–º. –≤ [docs/directus-content-management.md](docs/directus-content-management.md#–∫–∞–∫-–ø–æ–ª—É—á–∏—Ç—å-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π-—Ç–æ–∫–µ–Ω-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞-directus).

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ Docker

### Frontend
```bash
cd uks2/frontend
npm install
npm run dev
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É <http://localhost:3000>. –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Directus –ø—Ä–æ–ø–∏—à–∏—Ç–µ `NEXT_PUBLIC_CMS_URL` –∏ `CMS_INTERNAL_URL` –≤ `frontend/.env.local`.

### Directus
Directus –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ —á–µ—Ä–µ–∑ Docker, –æ–¥–Ω–∞–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CLI (—Ç—Ä–µ–±—É–µ—Ç—Å—è Node.js 22+):
```bash
cd uks2/directus
npm install
npx directus bootstrap
npx directus start
```
–§–∞–π–ª `directus/snapshot.yaml` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ö–µ–º—É –∫–æ–ª–ª–µ–∫—Ü–∏–π (–ø—Ä–æ–µ–∫—Ç—ã, –∑–∞–∫—É–ø–∫–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ —Ç. –¥.). –ü—Ä–∏–º–µ–Ω–∏—Ç—å –µ—ë –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:
```bash
npx directus schema apply snapshot.yaml
```
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∞–¥–º–∏–Ω–∫–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ <http://localhost:8055/admin>. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `.env` (`DIRECTUS_ADMIN_EMAIL`, `DIRECTUS_ADMIN_PASSWORD`). –ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ Nginx –ø–æ –ø—É—Ç–∏ `/admin`, –æ–±–Ω–æ–≤–∏—Ç–µ `DIRECTUS_PUBLIC_URL` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://uks2.localhost/admin`) –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `DIRECTUS_COOKIE_DOMAIN` ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∞–¥—Ä–µ—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
cd uks2
docker compose up --build
```

> ‚ÑπÔ∏è **Windows**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ named pipe `//./pipe/dockerDesktopLinuxEngine`. –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π `unable to get image 'nginx:1.27-alpine'`, –∑–Ω–∞—á–∏—Ç Docker Engine –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Docker Hub. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ `docker compose up --build`. –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `docker pull nginx:1.27-alpine`.

–°–µ—Ä–≤–∏—Å—ã –∏ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Å–º. `.env`):
- `https://uks.delightsoft.ru` ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.
- `https://uks.delightsoft.ru/admin` ‚Äî Directus (REST, GraphQL, –∞–¥–º–∏–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ `/admin`).
- `https://uks.delightsoft.ru/db` ‚Äî pgAdmin (PostgreSQL UI, –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏–∑ `PGADMIN_DEFAULT_EMAIL` / `PGADMIN_DEFAULT_PASSWORD`).
- `http://uks2.localhost`, `http://uks2.localhost/admin` –∏ `http://uks2.localhost/db` ‚Äî –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã —á–µ—Ä–µ–∑ `/etc/hosts`.
- `http://localhost:8055` ‚Äî –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Directus –±–µ–∑ Nginx-–ø—Ä–æ–∫—Å–∏.
- `http://localhost:9001` ‚Äî MinIO console (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏–∑ `.env`).
- `redis://localhost:6379` ‚Äî Redis –¥–ª—è –∫–µ—à–∞ Directus.

> üîê –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–æ–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ Nginx —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—É—é –ø–∞—Ä—É –≤ `ops/nginx/certs`. –ë—Ä–∞—É–∑–µ—Ä –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç –æ –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ ‚Äî –ø—Ä–∏–º–∏—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–≤–æ–π `fullchain.pem`/`privkey.pem` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `docker compose up -d nginx`.

### –ü—Ä–æ–¥–∞–∫—à–Ω –Ω–∞ Unix-—Å–µ—Ä–≤–µ—Ä–µ

–î–ª—è –ø–æ—à–∞–≥–æ–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ Linux-—Å–µ—Ä–≤–µ—Ä–µ —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ–º–µ–Ω–æ–º –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å–º. –¥–æ–∫—É–º–µ–Ω—Ç [docs/unix-docker-deployment.md](docs/unix-docker-deployment.md). –í –Ω—ë–º –æ–ø–∏—Å–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DNS, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è `.env`, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Nginx –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –ï—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä —Å–æ–æ–±—â–∞–µ—Ç –æ –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ (`ERR_CERT_AUTHORITY_INVALID`), —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ [docs/https-troubleshooting.md](docs/https-troubleshooting.md). –î–ª—è —Ä–∞–∑–±–æ—Ä–∞ —Ç–∏–ø–æ–≤—ã—Ö –æ—à–∏–±–æ–∫ Directus (–Ω–∞–ø—Ä–∏–º–µ—Ä, `password authentication failed for user "uks2"`) –∑–∞–≥–ª—è–Ω–∏—Ç–µ –≤ [docs/directus-troubleshooting.md](docs/directus-troubleshooting.md). –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã —Å –Ω—É–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ò–ò –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≥–æ—Ç–æ–≤—ã–º [–ø—Ä–æ–º–ø—Ç–æ–º](docs/uks2-system-prompt.md), –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ü–µ–ª–µ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –¥–∏–∑–∞–π–Ω –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö.

### –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Redis

Redis –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–ª—è Directus. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ GraphQL/REST,
- —Ö—Ä–∞–Ω–µ–Ω–∏—è rate-limit –∏ —Å—á—ë—Ç—á–∏–∫–æ–≤,
- –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—è–º–∏ (flows, webhooks).

–ë–µ–∑ –Ω–µ–≥–æ Directus –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –Ω–∞–≥—Ä—É–∑–∫–∞–º –Ω–∏–∂–µ.

### –ë–∞–∑–æ–≤—ã–π favicon –¥–ª—è Directus

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `directus/extensions/app/public/` –ª–µ–∂–∏—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π favicon –≤ —Ñ–æ—Ä–º–∞—Ç–µ SVG. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `DIRECTUS_APP_ICON` —É–∫–∞–∑—ã–≤–∞–µ—Ç Directus –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ `favicon.ico`, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É –∞–¥–º–∏–Ω–∫–∞ –Ω–µ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–º—É –±–∏–Ω–∞—Ä–Ω–æ–º—É —Ñ–∞–π–ª—É.

### Cookie Directus –∏ –æ—à–∏–±–∫–∏ 400

Directus —Ö—Ä–∞–Ω–∏—Ç refresh-—Ç–æ–∫–µ–Ω –≤ HTTP-only cookie. –ï—Å–ª–∏ –¥–æ–º–µ–Ω –≤ cookie –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –¥–æ–º–µ–Ω–æ–º –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, –∑–∞–ø—Ä–æ—Å `/auth/refresh` –∏–ª–∏ `/auth/login` –≤–µ—Ä–Ω—ë—Ç 400. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DIRECTUS_COOKIE_DOMAIN` (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞), –∞ —Ç–∞–∫–∂–µ `DIRECTUS_REFRESH_COOKIE_SECURE` –∏ `DIRECTUS_REFRESH_COOKIE_SAME_SITE`, —á—Ç–æ–±—ã –ø–æ–¥—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏ –±–æ–µ–≤—ã–µ –¥–æ–º–µ–Ω—ã. –í `.env.example` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ `.uks.delightsoft.ru`, —á—Ç–æ–±—ã cookie –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è `uks.delightsoft.ru` (–≤–∫–ª—é—á–∞—è –≤–ª–æ–∂–µ–Ω–Ω—ã–π –ø—É—Ç—å `/admin`) –∏ API-–∑–∞–ø—Ä–æ—Å–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∫–µ—Ç–æ–≤ MinIO

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∫–µ—Ç—ã –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
```bash
docker compose exec minio mc alias set local http://minio:9000 "$MINIO_ROOT_USER" "$MINIO_ROOT_PASSWORD"
docker compose exec minio mc mb -p local/$MINIO_BUCKET_PUBLIC
docker compose exec minio mc mb -p local/$MINIO_BUCKET_PRIVATE
```
–ó–∞—Ç–µ–º –≤–∫–ª—é—á–∏—Ç–µ S3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ Directus (`Settings ‚Üí Storage`) –∏ —É–∫–∞–∂–∏—Ç–µ MinIO –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫.

#### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–∫–∞–Ω–µ—Ä–∞ MinIO

–ü—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ MinIO –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ `has incomplete body` –æ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö
—Ñ–∞–π–ª–∞—Ö `.usage.json` –∏–ª–∏ `.bloomcycle.bin` –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ `.minio.sys/buckets`. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `minio` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
`ops/minio/start-minio.sh`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —ç—Ç–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–∞, —á—Ç–æ–±—ã —Å–∫–∞–Ω–µ—Ä MinIO
–ø–µ—Ä–µ—Å–æ–∑–¥–∞–ª –∏—Ö –∑–∞–Ω–æ–≤–æ. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–µ–∫ –∏ –≤—Ä—É—á–Ω—É—é –æ—á–∏—Å—Ç–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ `minio_data` –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
`docker volume rm uks2_minio_data` –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º.

## –†–∞–±–æ—Ç–∞ —Å Directus

- Snapshot —Å—Ö–µ–º—ã (`directus/snapshot.yaml`) –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏: `homepage`, `projects`, `procurements`, `documents`, `news_articles`, `contacts`, `about_values` –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏.
- –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API —Å–º. –≤ `frontend/src/lib/api.ts`. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç REST (`/items/...`) —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ –ø–æ–ª–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (Directus)

–ü–æ–ª–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî [docs/directus-content-management.md](docs/directus-content-management.md). –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞.

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç —Ä–∞–∑–¥–µ–ª—ã —Å–∞–π—Ç–∞: –Ω–æ–≤–æ—Å—Ç–∏, –ø—Ä–æ–µ–∫—Ç—ã, –∑–∞–∫—É–ø–∫–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã.

### 1. –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ <http://uks2.localhost/admin> (–ª–∏–±–æ –¥–æ–º–µ–Ω, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `DIRECTUS_PUBLIC_URL`).
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —Å–æ–∑–¥–∞–Ω–Ω—ã–º –ø—Ä–∏ bootstrap (`DIRECTUS_ADMIN_EMAIL` / `DIRECTUS_ADMIN_PASSWORD`).
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ –≤ —Ä–∞–∑–¥–µ–ª–µ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –∏ –Ω–∞–∑–Ω–∞—á—å—Ç–µ –∏–º —Ä–æ–ª—å `editor`.

### 2. –†–∞–±–æ—Ç–∞ —Å –º–µ–¥–∏–∞—Ç–µ–∫–æ–π

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–§–∞–π–ª—ã**.
2. –ù–∞–∂–º–∏—Ç–µ **–ó–∞–≥—Ä—É–∑–∏—Ç—å** –∏ –¥–æ–±–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (WebP/JPEG/PNG). Directus —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ –±–∞–∫–µ—Ç–µ MinIO, —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è **–ù–∞–∑–≤–∞–Ω–∏–µ**, **–û–ø–∏—Å–∞–Ω–∏–µ**, **Alt-—Ç–µ–∫—Å—Ç** ‚Äî —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤—ã–≤–æ–¥—è—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ –∏ –ø–æ–º–æ–≥–∞—é—Ç SEO.
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫–∏ (`–î–æ–±–∞–≤–∏—Ç—å ‚Üí –ü–∞–ø–∫–∞`) –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `news`, `projects`).

### 3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–∏ —Å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–µ–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é **news_articles** ‚Üí **–°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç**.
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **title** ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏.
   - **slug** ‚Äî URL (–ª–∞—Ç–∏–Ω–∏—Ü–µ–π, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤).
   - **published_at** ‚Äî –¥–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.
   - **excerpt** ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏.
   - **content** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç (Markdown/WYSIWYG).
   - **cover** ‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ –º–µ–¥–∏–∞—Ç–µ–∫–∏ (–∫–Ω–æ–ø–∫–∞ **–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª**).
3. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∏–ª–∏ —Ç–µ–≥–∏, –µ—Å–ª–∏ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç—É—Å **–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ** –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç. –°—Ç–∞—Ç—å—è –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ `/zakupki` –∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ –±–ª–æ–∫–µ –Ω–æ–≤–æ—Å—Ç–µ–π (–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞).

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏ –∫ –ø—Ä–æ–µ–∫—Ç—É

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é **projects** –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç –ª–∏–±–æ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π.
2. –í –±–ª–æ–∫–µ **gallery** –¥–æ–±–∞–≤—å—Ç–µ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ç–∏–ø–∞ `project_gallery_item`.
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–ø–æ–ª–µ **image**) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–¥–ø–∏—Å—å (–ø–æ–ª–µ **caption**).
4. –£–∫–∞–∂–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è –ø—Ä–æ–µ–∫—Ç–∞: –≥–æ–¥, —Ç–∏–ø, —Å—Ç–∞—Ç—É—Å, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ì–∞–ª–µ—Ä–µ—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (`/projects` –∏ `/projects/[slug]`).

### 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—É–ø–∫–∞–º–∏ –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–º–∏ –ø–æ–º–µ—â–µ–Ω–∏—è–º–∏

1. –í –∫–æ–ª–ª–µ–∫—Ü–∏–∏ **procurements** —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø–∏—Å—å –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é.
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç—ã –ø—Ä–∏—ë–º–∞ –∑–∞—è–≤–æ–∫, –∫–æ–Ω—Ç–∞–∫—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞.
3. –í –ø–æ–ª–µ **documents** –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª—ã (PDF/DOC). Directus –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ä–∞–∑–º–µ—Ä –∏ MIME-—Ç–∏–ø—ã —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º.
4. –î–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –ï–ò–° –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –ø–æ–ª–µ **eis_links** ‚Äî –∫–∞–∂–¥—É—é —Å—Å—ã–ª–∫—É –≤–≤–æ–¥–∏—Ç–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏.
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç—É—Å—ã `draft`, `review`, `published`, `archived` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç—å—é –Ω–∞ —Å–∞–π—Ç–µ. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∑–∞–∫—É–ø–æ–∫ –º–æ–≥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏, —Ä–µ–¥–∞–∫—Ç–æ—Ä —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é.

### 6. –î–æ–∫—É–º–µ–Ω—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã

1. –ö–æ–ª–ª–µ–∫—Ü–∏—è **documents** —Ö—Ä–∞–Ω–∏—Ç –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã. –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, –¥–∞—Ç—É –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ —Å–∞–º —Ñ–∞–π–ª.
2. –ü–æ–ª–µ **is_visible** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/documents`.
3. –î–ª—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É **contacts** –∏ –±–ª–æ–∫–∏ `about_values` (–æ–Ω–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö ¬´–û –∫–æ–º–ø–∞–Ω–∏–∏¬ª –∏ ¬´–ö–æ–Ω—Ç–∞–∫—Ç—ã¬ª).

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç (`https://uks2.localhost` –∏–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω) –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—è–≤–∏–ª–∏—Å—å.
2. –í —Å–ª—É—á–∞–µ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É **–ü—Ä–æ—Å–º–æ—Ç—Ä** –≤ Directus (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–ø–∏—Å–∏, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã flow/operations).
3. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏ –∏ –∫–µ—à. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à —á–µ—Ä–µ–∑ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à**.

### 8. –°–æ–≤–µ—Ç—ã –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≤–µ—Ä—Å–∏—è–º–∏

- Directus —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Ç–∞–±–ª–∏—Ü–∞ `directus_revisions`). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É **–ò—Å—Ç–æ—Ä–∏—è** –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–ø–∏—Å–∏, —á—Ç–æ–±—ã –æ—Ç–∫–∞—Ç–∏—Ç—å –ø—Ä–∞–≤–∫–∏.
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (flows, webhooks) –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π –∑–∞–∫—É–ø–æ–∫ –∏–ª–∏ –Ω–æ–≤–æ—Å—Ç–µ–π.
- –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ snapshot —Å—Ö–µ–º—ã: `npx directus schema snapshot snapshot.yaml --yes`, —á—Ç–æ–±—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ–∂–¥—É —Å—Ä–µ–¥–∞–º–∏.

### 9. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `pg_dump` –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.
- –§–∞–π–ª—ã: `mc mirror` –¥–ª—è MinIO –∏–ª–∏ –¥—Ä—É–≥–æ–π S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –±—ç–∫–∞–ø.
- Snapshot Directus: `directus schema snapshot`, –∞ —Ç–∞–∫–∂–µ —ç–∫—Å–ø–æ—Ä—Ç —Ä–æ–ª–µ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- Frontend: `npm run lint` (–≤ `uks2/frontend`).
- –°—Ö–µ–º–∞ Directus: `npx directus schema validate snapshot.yaml`.
- Docker Compose: `docker compose config` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.

## –¢—Ä–∞–µ–∫—Ç–æ—Ä–∏—è –¥–µ–ø–ª–æ—è

1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å `.env` —Å –±–æ–µ–≤—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏, S3 –∏ SMTP.
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `docker compose up -d` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ 80/443.
   –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ `docker-compose.yml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π `restart: unless-stopped`, –ø–æ—ç—Ç–æ–º—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ Docker Engine
   –∏–ª–∏ —Å–∞–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è.
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –Ω–∞ –¥–æ–º–µ–Ω (`uks.delightsoft.ru` –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–æ–≥ `uks2.example.com`).
4. –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ Directus –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É.
5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–ª–∏–Ω—Ç–µ—Ä, e2e) –∏ –≤–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Nginx/Directus.

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose restart frontend

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Nginx
docker compose logs -f nginx

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ snapshot –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Directus
npx directus schema snapshot snapshot.yaml --yes
```

